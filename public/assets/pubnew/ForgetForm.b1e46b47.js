import{b as B,k as D,u as G,e as j,r as y,A as V,o as u,f as h,w as a,g as e,c as $,a as s,a2 as z,m as t,n as F,h as E,C as I,t as J,T as K,E as S,F as W,G as Q,H as X,I as Y,J as Z,K as ee}from"./bundle.2a7d263a.js";import{i as oe,c as se,e as te,_ as ae,f as ne,a as le}from"./icons.2ab39869.js";import{a as ie,u as re,c as pe,d as de,M as ue,L as p,g as ce,r as me}from"./index.5033bff8.js";const f=g=>(Z("data-v-6ca6489e"),g=g(),ee(),g),_e={id:"auth-modal",class:"gb-modal-sm gb-modal-container"},fe={class:"nav-header mobile"},ge=f(()=>s("b",null,"Esque\xE7a a senha",-1)),ve={class:"login-form-wrap pall10 pb40"},ye=f(()=>s("div",{class:"ta mt20 mb40 pc"},"Esque\xE7a a senha",-1)),he={class:"flex-a"},be=f(()=>s("div",{class:"c-theme mr10"},"Tipo de conta:",-1)),ke={class:"flex-a"},xe={class:"flex-a"},Ee=f(()=>s("span",{class:"ml4"},"+55",-1)),Te={class:"flex-a"},we={class:"flex-a righticon"},Ce=f(()=>s("div",{class:"line"},null,-1)),Ve={class:"btn-wrap flex-a-j"},$e={key:1},Fe=B({__name:"ForgetForm",setup(g){const N=re(),R=pe(),i=de();D(),G();const A=j(()=>R.type===ue.FORGETPWD),T=y(),l=V({area_code:"55",email:"",phone:"",code:"",password:""}),M=V({email:[{required:!0,trigger:"blur",message:""}],phone:[{required:!0,trigger:"blur",message:""}],code:[{required:!0,trigger:"blur",message:""}],password:[{required:!0,trigger:"blur",message:""}]}),c=y(0),w=y();let b=!1;const P=async()=>{if(b)return;b=!0;const r={phone:l.phone,type:i.loginType,email:l.email};i.loginType===p.PHONE&&delete r.email;const[o,v]=await ce(r);b=!1,!o&&(S.success(v.message),c.value=120,w.value=setInterval(()=>{c.value--,c.value===0&&clearInterval(w.value)},1e3))},k=y(!1),q=async r=>{!r||r.validate(async(o,v)=>{if(!o)return;k.value=!0;const m={...l,type:i.loginType};i.loginType===p.EMAIL&&delete m.phone,i.loginType===p.PHONE&&delete m.email;const[x,d]=await me(m);if(x)return k.value=!1;S.success(d.message),N.sessionid=d.data.item.sessionid,location.href="/"})};return(r,o)=>{const v=oe,m=se,x=te,d=W,_=Q,H=ae,L=ne,O=le,C=X,U=Y;return u(),h(K,{name:"gb-modal-in"},{default:a(()=>[e(A)?(u(),$("div",{key:0,class:"gb-modal-portal",onClick:o[10]||(o[10]=n=>r.$router.push(r.$route.path))},[s("div",{class:"gb-modal",onClick:o[9]||(o[9]=z(()=>{},["stop"]))},[s("div",{class:"close",onClick:o[0]||(o[0]=n=>r.$router.push(r.$route.path))},[t(v)]),s("div",_e,[s("div",fe,[t(m,{class:"icon-back",onClick:o[1]||(o[1]=n=>r.$router.back())}),ge]),s("div",ve,[ye,s("div",he,[be,s("div",{class:F(["tab pt2 pb2 pl10 pr10",{active:e(i).loginType===e(p).PHONE}]),onClick:o[2]||(o[2]=n=>e(i).loginType=e(p).PHONE)}," Telefone ",2),s("div",{class:F(["tab pt2 pb2 pl10 pr10 mr10",{active:e(i).loginType===e(p).EMAIL}]),onClick:o[3]||(o[3]=n=>e(i).loginType=e(p).EMAIL)}," Correio ",2)]),t(U,{ref_key:"ruleFormRef",ref:T,model:e(l),rules:e(M),class:"login-form mt20"},{default:a(()=>[e(i).loginType===e(p).EMAIL?(u(),h(_,{key:0,prop:"email"},{default:a(()=>[t(d,{modelValue:e(l).email,"onUpdate:modelValue":o[4]||(o[4]=n=>e(l).email=n),type:"text","auto-complete":"off",placeholder:"Seu e-mail"},{prefix:a(()=>[s("div",ke,[t(x,{class:"input-icon"})])]),_:1},8,["modelValue"])]),_:1})):E("",!0),e(i).loginType===e(p).PHONE?(u(),h(_,{key:1,prop:"phone"},{default:a(()=>[t(d,{modelValue:e(l).phone,"onUpdate:modelValue":o[5]||(o[5]=n=>e(l).phone=n),type:"text","auto-complete":"off",placeholder:"Tu n\xFAmero de celular"},{prefix:a(()=>[s("div",xe,[t(H,{class:"input-icon"}),Ee])]),_:1},8,["modelValue"])]),_:1})):E("",!0),t(_,{prop:"password"},{default:a(()=>[t(d,{modelValue:e(l).password,"onUpdate:modelValue":o[6]||(o[6]=n=>e(l).password=n),type:"password","auto-complete":"off",placeholder:"Senha (6-22 letras e n\xFAmeros)",maxlength:"22"},{prefix:a(()=>[t(L,{class:"input-icon"})]),_:1},8,["modelValue"])]),_:1}),t(_,{prop:"code"},{default:a(()=>[t(d,{modelValue:e(l).code,"onUpdate:modelValue":o[7]||(o[7]=n=>e(l).code=n),type:"text","auto-complete":"off",placeholder:"C\xF3digo de verifica\xE7\xE3o"},{prefix:a(()=>[s("div",Te,[t(O,{class:"input-icon"})])]),suffix:a(()=>[s("div",we,[Ce,s("div",Ve,[e(c)===0?(u(),h(C,{key:0,type:"primary",link:"",onClick:P},{default:a(()=>[I(" Enviar ")]),_:1})):(u(),$("span",$e,J(e(c))+"s",1))])])]),_:1},8,["modelValue"])]),_:1}),t(_,{style:{width:"100%"},class:"mt40"},{default:a(()=>[t(C,{loading:e(k),type:"primary",style:{width:"100%"},onClick:o[8]||(o[8]=n=>q(e(T)))},{default:a(()=>[I(" Redefinir senha ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])])])):E("",!0)]),_:1})}}}),Re=ie(Fe,[["__scopeId","data-v-6ca6489e"]]);export{Re as default};
